# Установка Docker

Подключаемся по SSH с HQ-CLI на HQ-SRV, вводим пароль

`ssh sshuser@192.168.0.2 -p 2024`

Заходим в привилегированный режим

`sudo su`

![{615A3324-85A6-42D7-9B3A-7FD3B485A766}](https://github.com/user-attachments/assets/8c1b3963-21a3-47bc-920c-143c1e355b05)

Открываем браузер Firefox и пишем в поиске "docker download debian" и переходим по ссылке указанной на скриншоте

![{1435925B-F552-436A-A380-0A0ED053EB54}](https://github.com/user-attachments/assets/becbc223-c7f3-4fe7-825c-6d9d7ccf6f5a)

Далее справа выбираем раздел "Install from a package" и переходим по подчёркнутой ссылке

![{23B84B20-E2CD-4F95-AD53-385028E01C31}](https://github.com/user-attachments/assets/39eec61a-7dcf-4805-b239-cc0e8baafae3)

Переходим по указанному пути до пакетов, кликая на директории

![Гифка с Gifius ru](https://github.com/user-attachments/assets/a084fada-6bd3-45c2-93f4-d7ae9ba20979)

Нам требуются пакеты `containered.io`, `docker-ce-cli`, `docker-ce`, `docker-compose-plugin`

Нажимаем ПКМ по файлу пакета и копируем ссылку, выбираем последние версии

![{73DD0EB2-7B99-43F1-BEFF-9B5992CA384F}](https://github.com/user-attachments/assets/a04a1069-db95-41ac-b3ae-792f3a4be98a)

Далее создаём файл `url.txt` и вставляем в него ссылки, по 1 на строку

`nano url.txt`

![{CC918228-7F9E-40F7-A871-28914B9C78A1}](https://github.com/user-attachments/assets/91bd7a49-2bf0-4ff6-beca-06adfcebd5cd)

Скачиваем пакеты 

`wget -i url.txt`

Устанавливаем пакеты

`apt install ./*.deb`

# Перенос docker ( если мало места )

`systemctl stop docker.socket`

`systemctl stop docker.service`

`apt install rsync`

`rsync -aP /var/lib/docker /home/`

`nano /etc/docker/daemon.json`

![{EEA6A1A2-22C7-416F-9ABA-6CF564A33357}](https://github.com/user-attachments/assets/84fe546d-e7ad-4754-a7cd-727e23d2e19c)

`systemctl restart docker`

# Установка MediaWiki

Вбиваем в поиск "media wiki docker compose" и переходим на указанную ссылку

![{D9D4E07A-64DE-414D-BC2C-C3F3567EB2AC}](https://github.com/user-attachments/assets/f8c5db18-bcd9-449b-b27a-55828f61470b)

![{269CC090-4687-44A2-A70F-DB7E6A50E4EC}](https://github.com/user-attachments/assets/f0936c9b-c882-4afb-8500-97a4b097b3d3)

![{BF1A961E-926D-41EC-8650-4A292425EA81}](https://github.com/user-attachments/assets/4549e25a-a881-4621-bb18-205a2ff310a3)

Создаём файл `wiki.yml`, копируем туда выделенную конфигурацию с последнего скриншота и изменяем её

`nano wiki.yml`

❗СМОТРИТЕ, ЧТОБЫ ПОСЛЕ КОПИРОВАНИЯ НЕ БЫЛО ОТСТУПОВ В НАЧАЛЕ КОНФИГА, ИНАЧЕ ВЫ НЕ СМОЖЕТЕ ЗАПУСТИТЬ СТЕК КОНТЕЙНЕРОВ ❗

![{C843A7DB-1989-4769-AF16-A4E4E506941F}](https://github.com/user-attachments/assets/96e5e8f9-4bf9-4906-af42-05c1e5210287)

Создаём раздел базы данных

`docker volume create dbvolume`

Запускаем стек контейнеров

`docker compose -f wiki.yml up -d`




